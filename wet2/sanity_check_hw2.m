%% Sanity Check
% Run all the functions that will be checked to make sure
% all required functions and returned variables exist
clear; close all ; clc ;

functions_list = {...
    'ind = find_first_posedge( [0 0 0 1 0 1 1 0 0] , 5 ) ;',...
    'info_bits = extract_info( [1 1 1 1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0] ) ;',...
    'info_bits = extract_info_amuned( [1 1 1 1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0] ) ;',...
    'hex_info = bin2hex([1 0 0 1 1 1 0 0 1 1 1 1]) ;',...
    'hex_info = UART_Rx( [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0] ) ;',...
    '[Vd , Id] = solve_diode_iter(1 , 1 ) ;',...
    '[Vd , Id] = solve_diode_graph(1 , 1 , 0 : 0.5 : 1) ; ',...    
    'yield = display_data(struct(''value'',[1 2 3 4 5 6 7],''name'',''stock1'')); '...
    '[decision, buy_names] = analyze_stocks(struct(''value'',[1 2 3 4 5 6 7 8],''name'',''stock1'')) ; '...
    'stock_analysis; '...
    'close all ;',...
    'ID = getID() ;'...
    } ;

try
    eval('question_answered = getChoice() ;');
    if question_answered==1
        functions_list= functions_list([1:7,11:12]);
    elseif question_answered==3
        functions_list= functions_list(6:12);
    end   
catch
    h = msgbox({'Error: A problem occurred while calling to getChoice.','Please fix the problem and try again.'});
    return
end


for function_index = 1 : numel(functions_list)
    string = functions_list{function_index} ;
    try
        eval(string) ;
    catch
        h = msgbox({'Error: A problem occurred while calling to:',...
            string ,...
            'Please fix the problem and try again.'},...
            'A Message For You...') ;
        set(h,'Color','r') ;
        return ;
    end
    
end
h = msgbox('All functions were successfully called!',...
    'A Message For You...') ;
set(h,'Color','g') ;